(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{135:function(e,t,a){e.exports=a(246)},246:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(10),s=a.n(o),l=a(34),i=a(35),c=a(39),u=a(37),d=a(42),p=a(30),h=a(65),m=a.n(h),f=a(18),E=Object(f.a)(),v=a(36),b=a(16),k=a.n(b),y=a(23),g=a.n(y),C=a(22),S=a.n(C),w=a(41),O=a(26),T=a.n(O),j=function(e){e?(T.a.defaults.headers.common.Authorization=e,localStorage.setItem("jwtToken",e)):(delete T.a.defaults.headers.common.Authorization,localStorage.removeItem("jwtToken"))},L=function(e,t){403===e&&(j(!1),t({type:"SET_CURRENT_USER",payload:""}),E.push("/sessionExpired"))},x=a(283),R=a(114),D=a.n(R),I=a(115),N=a.n(I),_=a(80),P=a(304),U=a(306),M=a(290),A=a(286),q=Object(x.a)((function(e){return{root:{marginLeft:"auto",marginRight:e.spacing(1)}}}));var z=function(e){var t=q();return n.a.createElement(A.a,{"aria-label":e.ariaLabel,color:e.color,onClick:e.onClick,children:e.children,className:t.root,size:e.size})},F=Object(x.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:400,margin:"auto",borderColor:"#3f51b5"},divider:{height:28,margin:4},input:{flex:1}}}));var G=function(e){var t=F();return n.a.createElement(_.a,{variant:"outlined",className:t.root},n.a.createElement(z,{color:"primary",ariaLabel:"Sort",onClick:e.handleSort},n.a.createElement(P.a,{title:"Sort"},n.a.createElement(D.a,null))),n.a.createElement(U.a,{placeholder:"Search",inputProps:{"aria-label":"search"},className:t.input,value:e.search,onChange:e.handleChange,name:"search"}),n.a.createElement(M.a,{className:t.divider,orientation:"vertical"}),n.a.createElement(z,{color:"primary",ariaLabel:"Add Task",onClick:e.handleClick},n.a.createElement(P.a,{title:"Create Task"},n.a.createElement(N.a,null))))},B=a(291),W=a(292),K=a(247),V=a(293),H=a(116),J=a.n(H),X=a(117),Y=a.n(X),Q=Object(x.a)((function(e){return{card:{width:500,margin:"auto",wordWrap:"break-word"}}}));var Z=function(e){var t=Q();return n.a.createElement(n.a.Fragment,null,k.a.map(e.filteredTasks,(function(a){return n.a.createElement("div",{key:a.todoListId},n.a.createElement(B.a,{className:t.card},n.a.createElement(W.a,null,n.a.createElement(K.a,{color:"secondary",variant:"overline",display:"block"},a.updatedTs),n.a.createElement(K.a,{color:"primary"},a.task)),n.a.createElement(V.a,null,n.a.createElement(z,{ariaLabel:"edit",color:"primary",size:"small",onClick:function(){return e.handleEdit(a)}},n.a.createElement(P.a,{title:"Edit Task"},n.a.createElement(J.a,{fontSize:"small"}))),n.a.createElement(z,{ariaLabel:"delete",color:"secondary",size:"small",onClick:function(){return e.handleDelete(a.todoListId)}},n.a.createElement(P.a,{title:"Delete Task"},n.a.createElement(Y.a,{fontSize:"small"}))))),n.a.createElement("br",null))})))},$=a(298),ee=a(294),te=a(297),ae=a(296),re=a(295);var ne=function(e){return n.a.createElement(ee.a,{open:e.showModal,onClose:e.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0},n.a.createElement(re.a,{id:"alert-dialog-title"},n.a.createElement(K.a,{color:"primary",variant:"h6",component:"p"},e.title)),n.a.createElement(ae.a,{dividers:!0,children:e.children}),n.a.createElement(te.a,null,n.a.createElement($.a,{onClick:e.handleClose,color:"secondary"},"Close"),n.a.createElement($.a,{onClick:e.handleAction,color:"primary"},e.buttonLabel)))},oe=a(122),se=a(302),le=Object(x.a)((function(e){return{root:{"& > *":{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}})),ie=function(e){var t=e.label,a=e.onChange,r=e.required,o=e.error,s=e.helperText,l=e.autofocus,i=e.multiline,c=e.rows,u=Object(oe.a)(e,["label","onChange","required","error","helperText","autofocus","multiline","rows"]),d=le();return n.a.createElement(se.a,{label:t,variant:"outlined",onChange:function(e){return a(e)},inputProps:u,className:d.root,fullWidth:!0,autoComplete:"off",required:r,error:!!o,helperText:s,autoFocus:l,multiline:i,rows:c})},ce=a(248),ue=a(299),de=Object(x.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),pe=function(e){var t=e.open,a=de();return n.a.createElement("div",null,n.a.createElement(ce.a,{className:a.backdrop,open:t},n.a.createElement(ue.a,{color:"inherit"})))},he=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleClick=function(){e.setState({showModal:!0})},e.handleSort=function(){var t=k.a.sortBy(e.state.tasks,[function(e){return e.task}]);e.state.sort&&k.a.reverse(t),e.setState({tasks:t,sort:!e.state.sort})},e.handleClose=function(){e.setState({showModal:!1,task:"",taskError:"",showDeleteModal:!1,deleteTaskId:"",taskId:""})},e.handleChange=function(t){var a=t.target.name,r=t.target.value;e.setState(Object(v.a)({},a,r))},e.handleSave=function(){var t=k.a.find(e.state.tasks,{todoListId:e.state.taskId});g.a.isEmpty(e.state.task)?e.setState({taskError:"Task cannot be blank"}):t&&g.a.equals(e.state.task,t.task)?e.handleClose():(e.handleClose(),e.setState({loading:!0}),e.props.saveTask({task:e.state.task,todoListId:e.state.taskId}))},e.handleEdit=function(t){e.setState({task:t.task,showModal:!0,taskId:t.todoListId})},e.handleDelete=function(t){e.setState({showDeleteModal:!0,deleteTaskId:t})},e.handleConfirmDelete=function(){e.handleClose(),e.setState({loading:!0}),e.props.deleteTask(e.state.deleteTaskId)},e.state={tasks:[],showModal:!1,task:"",search:"",taskError:"",taskId:"",showDeleteModal:!1,deleteTaskId:"",sort:!1,loading:!1},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.getTodoList()}},{key:"componentDidUpdate",value:function(e,t){this.props.todoList!==e.todoList&&this.setState({tasks:this.props.todoList}),!0===t.loading&&this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t=k.a.filter(this.state.tasks,(function(t){return t.task.toLowerCase().includes(e.state.search.toLowerCase())}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(G,{search:this.state.search,handleChange:this.handleChange,handleClick:this.handleClick,handleSort:this.handleSort}),n.a.createElement("br",null),n.a.createElement(Z,{filteredTasks:t,handleEdit:this.handleEdit,handleDelete:this.handleDelete}),n.a.createElement(ne,{showModal:this.state.showModal,handleClose:this.handleClose,handleAction:this.handleSave,buttonLabel:"SAVE CHANGES",title:"Create Task"},n.a.createElement(ie,{label:"Task",error:!!Object.keys(this.state.taskError).length,value:this.state.task,onChange:this.handleChange,name:"task",required:!0,maxLength:250,autofocus:!0,helperText:this.state.taskError,multiline:!0,rows:"6"})),n.a.createElement(ne,{showModal:this.state.showDeleteModal,handleClose:this.handleClose,handleAction:this.handleConfirmDelete,title:"Delete Task",buttonLabel:"DELETE"},"Do you want to delete this task?"),n.a.createElement(pe,{open:this.state.loading}))}}]),a}(n.a.Component),me=Object(p.b)((function(e){return{todoList:e.todoList.todoList}}),{getTodoList:function(){return function(){var e=Object(w.a)(S.a.mark((function e(t,a){var r,n,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a(),!(n=r.security).user||!n.validToken){e.next=14;break}return e.prev=2,e.next=5,T.a.get("/api/todoList/".concat(n.user.sub));case 5:o=e.sent,t({type:"GET_TODO_LIST",payload:o.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),L(e.t0.response.status,t);case 12:e.next=15;break;case 14:E.push("/");case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()},saveTask:function(e){return function(){var t=Object(w.a)(S.a.mark((function t(a,r){var n,o,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r(),!(o=n.security).user||!o.validToken){t.next=14;break}return t.prev=2,t.next=5,T.a.post("/api/todoList/".concat(o.user.sub),e);case 5:s=t.sent,a({type:"SAVE_TASK",payload:s.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),L(t.t0.response.status,a);case 12:t.next=15;break;case 14:E.push("/");case 15:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,a){return t.apply(this,arguments)}}()},deleteTask:function(e){return function(){var t=Object(w.a)(S.a.mark((function t(a){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.a.delete("/api/todoList/".concat(e));case 3:a({type:"DELETE_TASK",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),L(t.t0.response.status,a);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}})(he),fe=a(305),Ee=a(303),ve=Object(x.a)((function(e){return{root:{marginLeft:"auto",marginRight:e.spacing(1)}}})),be=function(e){var t=e.color,a=e.value,r=e.type,o=e.disabled,s=e.onClick,l=ve();return n.a.createElement($.a,{size:"small",color:t,variant:"outlined",className:l.root,type:r,disabled:o,onClick:s},a)};function ke(e){return n.a.createElement(Ee.a,Object.assign({elevation:6,variant:"filled"},e))}var ye={Email:{type:"text",label:"Email",autofocus:!0},Password:{type:"password",label:"Password",autofocus:!1}},ge=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).validate=function(t){var a=e.state.errors,r=t.target.name,n=t.target.value.trim();g.a.isEmpty(n)?a[r]="".concat(r," cannot be blank"):g.a.equals(r,"Email")&&!g.a.isEmail(n)?a[r]="".concat(r," is not valid"):delete a[r],e.setState({errors:a,open:!!Object.keys(a).length})},e.handleClose=function(t,a){"clickaway"!==a&&e.setState({open:!1,errors:{}})},e.handleChange=function(t){var a=t.target.name,r=t.target.value.trim();e.setState(Object(v.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault(),e.setState({loading:!0});var a={email:e.state.Email,password:e.state.Password};e.props.userlogin(a,e.props.history)},e.handleReset=function(){e.setState({Email:"",Password:"",errors:{},open:!1})},e.state={Email:"",Password:"",errors:{},open:!1,loading:!1},e}return Object(i.a)(a,[{key:"getStyle",value:function(){return{root:{maxWidth:345,margin:"auto"}}}},{key:"componentDidMount",value:function(){this.props.validToken&&this.props.history.push("/home")}},{key:"componentDidUpdate",value:function(e,t){this.props.validToken?this.props.history.push("/home"):this.props.errors&&this.props.errors!==e.errors&&this.setState({errors:this.props.errors,open:!0,loading:!1})}},{key:"render",value:function(){var e=this;return n.a.createElement(B.a,{style:this.getStyle().root},n.a.createElement(fe.a,{open:this.state.open,autoHideDuration:3e3,onClose:this.handleClose},n.a.createElement(ke,{onClose:this.handleClose,severity:"error"},k.a.map(this.state.errors,(function(e){return n.a.createElement("li",{key:e},e)})))),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(W.a,null,n.a.createElement(K.a,{gutterBottom:!0,variant:"h5",component:"h2",color:"primary"},"Login"),k.a.map(ye,(function(t,a){return n.a.createElement(ie,{key:a,label:t.label,error:e.state.errors[a],value:e.state[a],onChange:e.handleChange,name:a,required:!0,onBlur:e.validate,type:t.type,maxLength:30,autofocus:t.autofocus})}))),n.a.createElement(V.a,null,n.a.createElement(be,{color:"primary",value:"Submit",type:"submit",disabled:!!Object.keys(this.state.errors).length}),n.a.createElement(be,{color:"secondary",value:"Reset",onClick:this.handleReset}))),n.a.createElement(pe,{open:this.state.loading}))}}]),a}(r.Component),Ce=Object(p.b)((function(e){return{validToken:e.security.validToken,errors:e.todoList.loginError}}),{userlogin:function(e){return function(){var t=Object(w.a)(S.a.mark((function t(a){var r,n,o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.a.post("/api/login",e);case 3:r=t.sent,n=r.data.jwt,j(n),o=m()(n),a({type:"SET_CURRENT_USER",payload:o}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:"LOGIN_ERROR",payload:t.t0.response.data});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}})(ge);function Se(e){return n.a.createElement(Ee.a,Object.assign({elevation:6,variant:"filled"},e))}var we={Name:{type:"text",label:"Name",autofocus:!0},Email:{type:"text",label:"Email",autofocus:!1},Password:{type:"password",label:"Password",autofocus:!1},ConfirmPassword:{type:"password",label:"Confirm Password",autofocus:!1}},Oe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).validate=function(t){var a=e.state.errors,r=t.target.name,n=t.target.value.trim();g.a.isEmpty(n)?a[r]="".concat(r," cannot be blank"):g.a.equals(r,"Email")&&!g.a.isEmail(n)?a[r]="".concat(r," is not valid"):g.a.equals(r,"ConfirmPassword")&&!g.a.equals(n,e.state.Password)?a[r]="Password and ".concat(r," should be same"):delete a[r],e.setState({errors:a,open:!!Object.keys(a).length})},e.handleClose=function(t,a){"clickaway"!==a&&e.setState({open:!1,errors:{}})},e.handleChange=function(t){var a=t.target.name,r=t.target.value;e.setState(Object(v.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault(),e.setState({loading:!0});var a={name:e.state.Name,email:e.state.Email,password:e.state.Password,confirmPassword:e.state.ConfirmPassword};e.props.usersignup(a,e.props.history)},e.handleReset=function(){e.setState({Name:"",Email:"",Password:"",ConfirmPassword:"",errors:{},open:!1})},e.state={Name:"",Email:"",Password:"",ConfirmPassword:"",errors:{},open:!1,loading:!1},e}return Object(i.a)(a,[{key:"getStyle",value:function(){return{root:{maxWidth:345,margin:"auto"}}}},{key:"componentDidMount",value:function(){this.props.validToken&&this.props.history.push("/home")}},{key:"componentDidUpdate",value:function(e,t){this.props.validToken?this.props.history.push("/home"):this.props.errors&&this.props.errors!==e.errors&&this.setState({errors:this.props.errors,open:!0,loading:!1})}},{key:"render",value:function(){var e=this;return n.a.createElement(B.a,{style:this.getStyle().root},n.a.createElement(fe.a,{open:this.state.open,autoHideDuration:3e3,onClose:this.handleClose},n.a.createElement(Se,{onClose:this.handleClose,severity:"error"},k.a.map(this.state.errors,(function(e){return n.a.createElement("li",{key:e},e)})))),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(W.a,null,n.a.createElement(K.a,{gutterBottom:!0,variant:"h5",component:"h2",color:"primary"},"Sign Up"),k.a.map(we,(function(t,a){return n.a.createElement(ie,{key:a,label:t.label,error:e.state.errors[a],value:e.state[a],onChange:e.handleChange,name:a,required:!0,onBlur:e.validate,type:t.type,maxLength:30,autofocus:t.autofocus})}))),n.a.createElement(V.a,null,n.a.createElement(be,{color:"primary",value:"Submit",type:"submit",disabled:!!Object.keys(this.state.errors).length}),n.a.createElement(be,{color:"secondary",value:"Reset",onClick:this.handleReset}))),n.a.createElement(pe,{open:this.state.loading}))}}]),a}(r.Component),Te=Object(p.b)((function(e){return{validToken:e.security.validToken,errors:e.todoList.signupError}}),{usersignup:function(e,t){return function(){var a=Object(w.a)(S.a.mark((function a(r){return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post("/api/signup",e);case 3:t.push("/"),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),r({type:"SIGNUP_ERROR",payload:a.t0.response.data});case 9:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e){return a.apply(this,arguments)}}()}})(Oe),je=a(59),Le=Object(x.a)((function(e){return{root:{width:"80%",margin:"auto"},link:{"&:hover":{color:"#F50057"},"&:active":{color:"#F50057"}}}})),xe=function(){var e=Le();return n.a.createElement("div",{className:e.root},"Your session has expired."," ",n.a.createElement(je.a,{className:e.link,to:"/"},"Click here to login."))},Re=a(300),De=a(301),Ie=Object(x.a)((function(e){return{root:{"&:hover":{color:"#F50057"},"&:active":{color:"#F50057"}}}})),Ne=function(e){var t=e.color,a=e.value,r=e.to,o=e.onClick,s=Ie();return n.a.createElement($.a,{className:s.root,color:t,component:je.a,to:r,onClick:o},a)},_e=function(){return j(!1),{type:"SET_CURRENT_USER",payload:""}},Pe=Object(x.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},divider:{height:28,margin:6,backgroundColor:"#fff"}}})),Ue=Object(p.b)((function(e){return{security:e.security}}),{logout:_e})((function(e){var t,a=Pe(),r=e.security,o=r.validToken,s=r.user,l=n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,{variant:"button"},s.name),n.a.createElement(M.a,{orientation:"vertical",className:a.divider}),n.a.createElement(Ne,{color:"inherit",to:"/",value:"Logout",onClick:function(){e.logout()}})),i=n.a.createElement(n.a.Fragment,null,n.a.createElement(Ne,{color:"inherit",to:"/",value:"Login"}),n.a.createElement(Ne,{color:"inherit",to:"/signup",value:"SignUp"}));return t=o&&s?l:i,n.a.createElement("div",{className:a.root},n.a.createElement(Re.a,{position:"static"},n.a.createElement(De.a,null,n.a.createElement(K.a,{variant:"h6",className:a.title},"TODO LIST"),t)))})),Me=a(40),Ae=a(120),qe=a(121),ze=a(50),Fe={validToken:!1,user:""},Ge=function(e){return!!e},Be=Object(Me.c)({security:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(ze.a)({},e,{validToken:Ge(t.payload),user:t.payload});default:return e}},todoList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(ze.a)({},e,{loginError:t.payload});case"SIGNUP_ERROR":return Object(ze.a)({},e,{signupError:t.payload});case"GET_TODO_LIST":return Object(ze.a)({},e,{todoList:t.payload});case"SAVE_TASK":var a=k.a.filter(e.todoList,(function(e){return e.todoListId!==t.payload.todoListId}));return Object(ze.a)({},e,{todoList:[].concat(Object(qe.a)(a),[t.payload])});case"DELETE_TASK":return Object(ze.a)({},e,{todoList:e.todoList.filter((function(e){return e.todoListId!==t.payload}))});default:return e}}}),We=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Me.d,Ke=Object(Me.e)(Be,We(Object(Me.a)(Ae.a))),Ve=localStorage.jwtToken;if(Ve){j(Ve);var He=m()(Ve);Ke.dispatch({type:"SET_CURRENT_USER",payload:He});var Je=Date.now()/1e3;He.exp<Je&&(Ke.dispatch(_e()),window.location.href="/")}var Xe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement(p.a,{store:Ke},n.a.createElement(d.c,{history:E},n.a.createElement(Ue,null),n.a.createElement("br",null),n.a.createElement(d.d,null,n.a.createElement(d.b,{path:"/",exact:!0,component:Ce}),n.a.createElement(d.b,{path:"/signup",exact:!0,component:Te}),n.a.createElement(d.b,{path:"/home",exact:!0,component:me}),n.a.createElement(d.b,{path:"/sessionExpired",exact:!0,component:xe}),n.a.createElement(d.a,{to:"/"}))))}}]),a}(n.a.Component);a(245);s.a.render(n.a.createElement(Xe,null),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.c933ffe5.chunk.js.map